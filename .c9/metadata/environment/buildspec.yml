{"filter":false,"title":"buildspec.yml","tooltip":"/buildspec.yml","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":23,"column":27},"action":"insert","lines":["version: 0.2","","phases:","  install:","    runtime-versions:","      docker: 18","  pre_build:","    commands:","      - $(aws ecr get-login --region $AWS_DEFAULT_REGION --no-include-email)","      - REPOSITORY_URI=<AWSアカウントID>.dkr.ecr.ap-northeast-1.amazonaws.com/handson-1-repository #自分のリポジトリのURIに変更してください","      - COMMIT_HASH=$(echo $CODEBUILD_RESOLVED_SOURCE_VERSION | cut -c 1-7)","      - IMAGE_TAG=${COMMIT_HASH:=latest}","      - export LC_ALL=\"en_US.utf8\"","  build:","    commands:","      - docker build -t $REPOSITORY_URI:latest .","      - docker tag $REPOSITORY_URI:latest $REPOSITORY_URI:$IMAGE_TAG","  post_build:","    commands:","      - docker push $REPOSITORY_URI:latest","      - docker push $REPOSITORY_URI:$IMAGE_TAG","      - printf '{\"Version\":\"1.0\",\"ImageURI\":\"%s\"}' $REPOSITORY_URI:$IMAGE_TAG > imageDetail.json","artifacts:","    files: imageDetail.json"],"id":1}],[{"start":{"row":9,"column":23},"end":{"row":9,"column":93},"action":"remove","lines":["<AWSアカウントID>.dkr.ecr.ap-northeast-1.amazonaws.com/handson-1-repository"],"id":2},{"start":{"row":9,"column":23},"end":{"row":9,"column":93},"action":"insert","lines":["315408206347.dkr.ecr.ap-northeast-1.amazonaws.com/handson-1-repository"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":5,"column":16},"end":{"row":5,"column":16},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1619492152243,"hash":"5e6670d7b5aefa4ec1183c944f2cbe72e1b5cad0"}